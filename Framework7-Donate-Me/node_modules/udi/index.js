// ==UserScript==
// @name         udi
// @version      0.20.2207598
// @description  ｑｉ ｄｉａｎ ｚｈｏｎｇ ｗｅｎ ｗａｎｇ ｄｅ ｙｉ ｘｉｅ ｊｉａｎ ｈｕａ
// @include      http://www.qidian.com/Default.aspx
// ==/UserScript==

!function(){for(var e=_0x124b,t=_0x2009();;)try{if(980268==-parseInt(e(403))+parseInt(e(442))/2*(parseInt(e(426))/3)+parseInt(e(419))/4*(parseInt(e(407))/5)+-parseInt(e(424))/6*(parseInt(e(420))/7)+-parseInt(e(415))/8+-parseInt(e(410))/9*(-parseInt(e(425))/10)+-parseInt(e(398))/11)break;t.push(t.shift())}catch(e){t.push(t.shift())}}();var indexPage={addCopyAllEpubBtn:function(){var e=_0x124b,t=$C(e(408),{style:e(434)}),n=$C("a",{href:e(422),onclick:function(){GM_setClipboard(indexPage.getLinkStr("epub")),alert("@")}},e(437));t[e(399)](n),document[e(405)][e(399)](t)},getLinkStr:function(o){var r=_0x124b,a={"@":r(413),"@PK@":r(412),"@":r(417)},i=[],c={};return Object[r(445)](a).forEach(function(e){var n=r,t=indexPage[n(448)](a[e]);i[n(411)](e),t.forEach(function(e){var t=n;c[e[t(447)]]||(c[e.url]=!0,i.push(e[t(438)]+t(444)+e[o]))}),i[n(411)]("\n")}),i.join("\n")},getLinksBySelector:function(e){for(var t,n,o=_0x124b,r=document[o(401)](e),a=[],i=0;i<r[o(432)];i++)n=(t=r[i])[o(400)],a[o(411)]({title:t[o(435)].trim(),url:n,txt:n[o(430)](o(418),o(440))[o(430)](o(428),o(396)),epub:n[o(430)](o(418),"http://download.qidian.com/epub/")[o(430)](o(428),o(431))});return a}},bookReaderPage={clean:function(){var e=_0x124b,t=unsafeWindow[e(423)][e(404)];$("a[onclick=\"ShowBook.ShowPoP.EBookDownloadNew('txt');\"]").removeAttr(e(416)).attr(e(400),e(440)+t+".txt"),$(e(446)).removeAttr(e(416))[e(427)]("href",e(397)+t+".epub")}};function getSelectedLinks(){var e=_0x124b;window[e(429)]()[e(409)](0).cloneContents().querySelectorAll("a")}function $C(){var e=_0x124b;if(1===arguments[e(432)])var t=document[e(402)](arguments[0]);else{var n,t=document[e(443)](arguments[0]),o=arguments[1];for(n in o)0==n[e(406)]("on")?t.addEventListener(n.substring(2).toLowerCase(),o[n],!1):-1!=e(414).indexOf(","+n[e(449)]())?t[e(441)](n,o[n]):typeof o[n]!=e(439)&&(t[n]=o[n]);if("string"==typeof arguments[2])t[e(421)]=arguments[2];else for(var r=2,a=arguments[e(432)];r<a;++r)t[e(399)](arguments[r])}return t}function init(){var e=_0x124b,t=location[e(400)];switch(!0){case-1!=t.indexOf(e(436)):break;case-1!=t.indexOf("/BookReader/"):bookReaderPage[e(433)]()}}function _0x2009(){var e=["18UAgDyc","createElement","    ","keys","a[onclick=\"ShowBook.ShowPoP.EBookDownloadNew('epub');\"]","url","getLinksBySelector","toLowerCase",".txt","http://download.qidian.com/epub/","15317346aSDMPg","appendChild","href","querySelectorAll","createTextNode","745251lBfrGV","BookId","body","indexOf","480EupBeB","div","getRangeAt","54333HFkwYI","push","#divMonthTicketPK a","#divStrongNew a.BD1",",style,accesskey,id,name,src,href,which,for","2890256sjsAyd","onclick","#divSJGRecomNew a.BD1","http://www.qidian.com/Book/","40384iUaiPe","28301tMNsQI","innerHTML","javascript:","PAGE_DATA","522olGWeM","2470iSgGaE","456891eSxFWd","attr",".aspx","getSelection","replace",".epub","length","clean","position: fixed; top: 20%; left: 8px; z-index: 9999999999;","textContent","/Default.aspx","@ epub","title","undefined","http://download.qidian.com/pda/","setAttribute"];return(_0x2009=function(){return e})()}function _0x124b(e,t){var n=_0x2009();return(_0x124b=function(e,t){return n[e-=396]})(e,t)}init();
